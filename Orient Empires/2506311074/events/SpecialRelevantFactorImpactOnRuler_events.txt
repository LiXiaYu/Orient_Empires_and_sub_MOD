############# SpecialRelevantFactorImpactOnRuler_events
# by 往来天地间 WangLaiTianDiJian
# SpecialRelevantFactorImpactOnRuler

#WLTDJ20220109


namespace = SpecialRelevantFactorImpactOnRuler

SpecialRelevantFactorImpactOnRuler.0001 = {
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.0001.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.0001.desc
	left_portrait = {
		character = scope:affected_ruler_throughout
		animation = personality_rational
	}
	right_portrait = {
		character = scope:relevant_factor_throughout
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	immediate = {
		save_scope_value_as = {
			name = pay_income_multiplier
			value = {
				value = scope:relevant_factor_throughout.max_military_strength
				divide = scope:affected_ruler_throughout.max_military_strength #兵力比值，超过此比例，赏赐如同岁币 0.1-2
				multiply = scope:relevant_factor_throughout.sub_realm_size
				divide = scope:affected_ruler_throughout.sub_realm_size #领土比值，领土比越大赏赐负担越小 0.01-1
				multiply = SpecialRelevantFactorImpactOnRuler_tribute_interval_year #朝贡要钱事件发生间隔
				multiply = 40 #再加一层倍率修正，可以看出每年给对方多少个月的收入（针对维持关系）
				multiply = { value = scope:relevant_factor_throughout.var:TributeSystem_completed_tribute_counter subtract = 1 multiply = 0.2 add = 1 } #每连续发生一次，花费比初次发生时加20%
			}
		}
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.0001.a
		SpecialRelevantFactorImpactOnRuler_event_0001_option_A_effect = yes
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.0001.b
		SpecialRelevantFactorImpactOnRuler_event_0001_option_B_effect = yes
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.0001.c
		SpecialRelevantFactorImpactOnRuler_event_0001_option_B_effect = yes
#		SpecialRelevantFactorImpactOnRuler_pay_income_function_effect = {
#			ACTOR = affected_ruler_throughout
#			TARGET = relevant_factor_throughout
#			THRESHOLD = 2
#			MONTHS = SpecialRelevantFactorImpactOnRuler_tribute_interval_year
#			MULTIPLIER = pay_income_multiplier
#		}
		scope:affected_ruler_throughout = {
			add_character_modifier = { modifier = SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier years = SpecialRelevantFactorImpactOnRuler_tribute_interval_year }
			SpecialRelevantFactorImpactOnRuler_spawn_cultural_event_troop_function_C_effect = {
				ARMY_RECEIVER = affected_ruler_throughout
				ORIGINOWNER = relevant_factor_throughout
				SIZE_FACTOR = 0.05
				NAME = SpecialRelevantFactorImpactOnRuler.0001.c.troop.name
				COST_FACTOR = 0.5
			}
		}
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.0001.d
		if = {
			limit = { is_allied_to = scope:relevant_factor_throughout }
			SpecialRelevantFactorImpactOnRuler_break_alliance_function_effect = { ACTOR = affected_ruler_throughout TARGET = relevant_factor_throughout }
		}
		if = {
			limit = { has_relation_WLTDJ_tributary = scope:relevant_factor_throughout }
			TributeSystem_break_tribute_relation_effect = {	SUZERAIN = affected_ruler_throughout TRIBUTARY = relevant_factor_throughout }
		}
	}
}



SpecialRelevantFactorImpactOnRuler.0002 = {#要钱事件自动答复
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.0002.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.0002.desc
	left_portrait = {
		character = scope:affected_ruler_throughout
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.0002.a
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_minimum_maintenance }
		if = {
			limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_more_to_get_positive_modifier }
			remove_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_more_to_get_positive_modifier
		}
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.0002.b
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_more_to_get_positive_modifier }
		if = {
			limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_minimum_maintenance }
			remove_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_minimum_maintenance
		}
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.0002.c
		if = {
			limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_more_to_get_positive_modifier }
			remove_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_more_to_get_positive_modifier
		}
		if = {
			limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_minimum_maintenance }
			remove_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_character_flag_auto_pay_minimum_maintenance
		}
	}
}



##########################
SpecialRelevantFactorImpactOnRuler.1001 = {#查看文化学习进度互动-在学习
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.1001.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.1001.desc
	left_portrait = {
		character = scope:recipient
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.1001.a
	}
}

SpecialRelevantFactorImpactOnRuler.1002 = {#查看文化学习进度互动-未学习
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.1002.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.1002.desc
	left_portrait = {
		character = scope:recipient
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.1002.a
	}
}

SpecialRelevantFactorImpactOnRuler.1003 = {#决议，设置在每年初的机制作用时是否弹出事件提示
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.1003.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.1003.desc
	left_portrait = {
		character = scope:affected_ruler_throughout
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.1003.a
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_no_effect_alert_at_all }
		if = {
			limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_all_effect_alert }
			remove_character_flag = SpecialRelevantFactorImpactOnRuler_all_effect_alert
		}
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.1003.b
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_all_effect_alert }
		if = {
			limit = { has_character_flag = SpecialRelevantFactorImpactOnRuler_no_effect_alert_at_all }
			remove_character_flag = SpecialRelevantFactorImpactOnRuler_no_effect_alert_at_all
		}

	}
}



######################触发时的提示

SpecialRelevantFactorImpactOnRuler.2001 = {
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.2001.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.2001.desc
	left_portrait = {
		character = scope:affected_ruler_throughout
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2001.a
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2001.b
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_type_A_01_no_effect_alert }
	}
}

SpecialRelevantFactorImpactOnRuler.2002 = {
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.2002.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.2002.desc
	left_portrait = {
		character = scope:affected_ruler_throughout
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2002.a
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2002.b
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_type_A_02_no_effect_alert }
	}
}

SpecialRelevantFactorImpactOnRuler.2003 = {
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.2003.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.2003.desc
	left_portrait = {
		character = scope:affected_ruler_throughout
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2003.a
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2003.b
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_type_A_03_no_effect_alert }
	}
}

SpecialRelevantFactorImpactOnRuler.2004 = {
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.2004.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.2004.desc
	left_portrait = {
		character = scope:affected_ruler_throughout
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2004.a
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2004.b
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_type_A_04_no_effect_alert }
	}
}

SpecialRelevantFactorImpactOnRuler.2007 = {
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.2007.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.2007.desc
	left_portrait = {
		character = scope:affected_ruler_throughout
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2007.a
	}
}



SpecialRelevantFactorImpactOnRuler.2008 = {
	type = character_event
	title = SpecialRelevantFactorImpactOnRuler.2008.tt
	theme = realm
	desc = SpecialRelevantFactorImpactOnRuler.2008.desc
	left_portrait = {
		character = scope:affected_ruler_throughout
		animation = personality_rational
	}
	override_background = { event_background = throne_room }
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2008.a
	}
	option = {
		name = SpecialRelevantFactorImpactOnRuler.2008.b
		add_character_flag = { flag = SpecialRelevantFactorImpactOnRuler_type_A_08_no_effect_alert }
	}
}

