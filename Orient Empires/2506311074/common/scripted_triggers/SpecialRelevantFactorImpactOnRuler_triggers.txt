############# SpecialRelevantFactorImpactOnRuler_triggers
# by 往来天地间 WangLaiTianDiJian
# SpecialRelevantFactorImpactOnRuler

#WLTDJ20220109

#小心注意，修改某个trigger可能引起本文件其他若干trigger变化，具体搜一下被修改的这个trigger名字就知道

#第1类（$SpecialRelevantFactorImpactOnRuler_type_A_01_A_character_modifier$）
#统治者A：帝国级别，且律令制
#统治者B：前提是，王国级或以上，并与A相邻，并且不是A的朝贡国，并且与A不是同宗族。满足这些前提下，且满足以下之一：不是A的盟国，与A文化组不同，与A交战，领地规模超20，有农民领袖特质
#A获得的修正：每有一个符合条件的AB组合获得负面修正（最大叠加数量为10）：“$SpecialRelevantFactorImpactOnRuler_type_A_01_A_character_modifier$”。若若符合条件的B超过10个，且A有4级君权，则降为3级君权。若符合条件的B超过10个，且A有3级或以上君权，则降为2级君权

#1.邻国不朝（$SpecialRelevantFactorImpactOnRuler_type_A_01_A_character_modifier$）
#统治者A：帝国级别，且律令制
#统治者B：同时满足：王国级或以上，与A相邻，与A不结盟，不是A的朝贡国，与A不是同宗族
#A获得的修正：每有一个符合条件的AB组合获得负面修正（最大叠加数量为10）：“$SpecialRelevantFactorImpactOnRuler_type_A_01_A_character_modifier$”。若符合条件的B超过5个，且A有4级君权，则降为3级君权。若符合条件的B超过10个，且A有3级或以上君权，则降为2级君权



SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_01_trigger = {
	#has_title = title:e_celestia
	highest_held_title_tier = tier_empire
	has_government = imperial_government
}

SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_01_trigger = {
	highest_held_title_tier >= tier_kingdom
	NOT = { has_relation_WLTDJ_suzerain = scope:$RULER$ }
	NOT = { dynasty = { this = scope:$RULER$.dynasty } }
	OR = {
		NOT = { has_same_culture_group_as = scope:$RULER$ }
		NOT = { is_allied_to = scope:$RULER$ }
		is_at_war_with = scope:$RULER$
		domain_size > 20
		has_trait = peasant_leader
		#has_claim_on = title:e_celestia
	}
}

SpecialRelevantFactorImpactOnRuler_any_relevant_factor_is_type_A_01_trigger = {
	any_neighboring_top_liege_realm_owner = {
		SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_01_trigger = { RULER = $RULER$ }
	}
}


#已经将原第2类与第1类合并
#2.蛮王接壤（$SpecialRelevantFactorImpactOnRuler_type_A_02_A_character_modifier$）
#统治者A：帝国级别，且律令制
#统治者B：前提是，王国级或以上，并与A相邻，并且不是A的朝贡国。满足这些前提下，且满足以下之一：不是A的盟国，与A文化组不同，与A交战，领地规模超20，有农民领袖特质
#A获得的修正：每有一个符合条件的AB组合获得负面修正（最大叠加数量为1）：“$SpecialRelevantFactorImpactOnRuler_type_A_02_A_character_modifier$”


SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_02_trigger = {
	SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_01_trigger = yes
}

SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_02_trigger = {
	highest_held_title_tier >= tier_kingdom
	NOT = {
		has_relation_WLTDJ_suzerain = scope:$RULER$
	}
	OR = {
		NOT = { has_same_culture_group_as = scope:$RULER$ }
		NOT = { is_allied_to = scope:$RULER$ }
		is_at_war_with = scope:$RULER$
		domain_size > 20
		has_trait = peasant_leader
		#has_claim_on = title:e_celestia
	}
}

SpecialRelevantFactorImpactOnRuler_any_relevant_factor_is_type_A_02_trigger = {
	any_neighboring_top_liege_realm_owner = {
		SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_02_trigger = { RULER = $RULER$ }
	}
}



#3.朝贡上国（$SpecialRelevantFactorImpactOnRuler_type_A_03_A_character_modifier_for_tips$）
#统治者A：伯爵级或以上
#统治者B：王国级或以上，且律令制，与A无直接或间接的领主-封臣关系；与A结盟或是A的宗主国；比A的级别高
#A获得的修正：每有一个符合条件的AB组合获得修正（最大叠加数量为10）：“$SpecialRelevantFactorImpactOnRuler_type_A_03_A_character_modifier_for_tips$”
#A为部落制时，将获得更多的威望奖励，而获得的金钱奖励更少（或面临更多的金钱收入损失）；A为非部落制时，将获得更多的金钱奖励（或面临更少的金钱损失），而获得的威望奖励更少


SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_03_trigger = {
	#is_ruler = yes
	highest_held_title_tier >= tier_county
}

SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_03_trigger = {
	highest_held_title_tier >= tier_kingdom
	has_government = imperial_government
	NOT = { is_vassal_or_below_of = scope:$RULER$ }
	NOT = { is_liege_or_above_of = scope:$RULER$ }
	tier_difference = {
		target = scope:$RULER$
		value > 0
	}
#	NOT = { this = scope:$RULER$ }
}

SpecialRelevantFactorImpactOnRuler_any_relevant_factor_is_type_A_03_trigger = {
	OR = {
		any_ally = {
			SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_03_trigger = { RULER = $RULER$ }
		}
		any_relation = {
			type = WLTDJ_suzerain
			SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_03_trigger = { RULER = $RULER$ }
		}	
	}
}



#4.尊王攘夷（$SpecialRelevantFactorImpactOnRuler_type_A_04_A_character_modifier$）
#统治者A：伯爵级或以上
#统治者B：王国级或以上，且律令制，与A在同一场战争中同盟，与A无直接或间接的领主-封臣关系
#A获得的修正：每有一个符合条件的AB组合获得修正（最大叠加数量为10）：“$SpecialRelevantFactorImpactOnRuler_type_A_04_A_character_modifier$”

SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_04_trigger = {
	SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_03_trigger = yes
}

SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_04_trigger = {
	highest_held_title_tier >= tier_kingdom
	has_government = imperial_government
	NOT = { is_vassal_or_below_of = scope:$RULER$ }
	NOT = { is_liege_or_above_of = scope:$RULER$ }
	NOT = { this = scope:$RULER$ }
}

SpecialRelevantFactorImpactOnRuler_any_relevant_factor_is_type_A_04_trigger = {
	any_war_ally = {
		SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_04_trigger = { RULER = $RULER$ }
	}
}



#5.朝贡互市（律令制帝国定期面临是否与朝贡国继续保持关系的抉择,3年触发一次）
#统治者A：帝国级别，且律令制
#统治者B：王国级或以上，且与A无直接或间接的领主-封臣关系，有资格作为为A的朝贡国且目前为A的朝贡国
#A受到的影响：
#若A为AI，则每一个符合条件的AB组合都会直接使A获得有益修正（无最大叠加限制）：“$SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier$”
#若A为玩家，则每一个符合条件的AB组合都会在年初对A触发同盟/朝贡选择事件。A可以选择：1、与B翻脸，结束同盟/朝贡关系。2、付钱给B，维持同盟/朝贡关系。3、付更多钱给B，获得有益修正：“$SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier$”。4、付更多钱给B，获得有益修正：“$SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier$”。另外付钱给B，获得一队纯常备军事件兵。
#前述事件兵种类随机，兵力与B当前的最大兵力成正比，支付给B的价格与B当前的最大兵力以及该类常备军的组建费用成正比。
#前述支付的金钱（为了获得有益修正所支付的金钱）的计算方法为：B扣除开支前的月收入，以及，某个固定金额，二者中取较大者，再乘以一个倍数，该倍数与B的军队人数、领土大小成正比。
#前述获得的事件兵，属性加成不受统治者A的影响，而是受到B的影响



#5.朝贡互市（律令制帝国定期面临是否与盟友、朝贡国继续保持关系的抉择,3年触发一次）
#统治者A：帝国级别，且律令制
#统治者B：前提王国级或以上，且与A无直接或间接的领主-封臣关系。在此基础上，满足下列条件之一，1、与A结盟,或，2、有资格作为为A的朝贡国且目前为A的朝贡国
#A受到的影响：
#若A为AI，则每一个符合条件的AB组合都会直接使A获得有益修正（无最大叠加限制）：“$SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier$”
#若A为玩家，则每一个符合条件的AB组合都会在年初对A触发同盟/朝贡选择事件。A可以选择：1、与B翻脸，结束同盟/朝贡关系。2、付钱给B，维持同盟/朝贡关系。3、付更多钱给B，获得有益修正：“$SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier$”。4、付更多钱给B，获得有益修正：“$SpecialRelevantFactorImpactOnRuler_type_A_05_A_01_character_modifier$”。另外付钱给B，获得一队纯常备军事件兵。
#前述事件兵种类随机，兵力与B当前的最大兵力成正比，支付给B的价格与B当前的最大兵力以及该类常备军的组建费用成正比。
#前述支付的金钱（为了获得有益修正所支付的金钱）的计算方法为：B扣除开支前的月收入，以及，某个固定金额，二者中取较大者，再乘以一个倍数，该倍数与B的军队人数、领土大小成正比。
#前述获得的事件兵，属性加成不受统治者A的影响，而是受到B的影响


SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_05_trigger = {
	SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_01_trigger = yes
#	NOT = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_skip_affected_ruler }
#	is_ai = no
}

SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_05_trigger = {
	highest_held_title_tier >= tier_kingdom
	NOT = { is_vassal_or_below_of = scope:$RULER$ }
	NOT = { is_liege_or_above_of = scope:$RULER$ }
	NOT = { this = scope:$RULER$ }
	NOT = { has_character_flag = SpecialRelevantFactorImpactOnRuler_type_A_05_skip_relevant_factor }
}

SpecialRelevantFactorImpactOnRuler_any_relevant_factor_is_type_A_05_trigger = {
	OR = {
#		any_ally = {
#			SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_05_trigger = { RULER = $RULER$ }
#		}
		any_relation = {
			type = WLTDJ_tributary
			TributeSystem_can_be_tributary_of_trigger = { SUZERAIN = $RULER$ }
			SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_05_trigger = { RULER = $RULER$ }
		}	
	}
}



#第6类（预留占位，暂未填写）
SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_06_trigger = {
	SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_01_trigger = yes
	is_ai = no
}

SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_06_trigger = {
	highest_held_title_tier >= tier_kingdom
	NOT = { this = scope:$RULER$ }
}

SpecialRelevantFactorImpactOnRuler_any_relevant_factor_is_type_A_06_trigger = {
	any_ally = {
		SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_05_trigger = { RULER = $RULER$ }
	}
}




#7.文化学习（朝贡国文化向宗主国文化学习革新）
#统治者A：非中华文化组，独立统治者，公爵或以上
#统治者B：中华文化组，与A文化不同，王国或以上,有资格作为A的宗主国，现为A的宗主国
#效果：对每一个符合条件的AB组合，可以理解为A所属的文化向B所属的文化进行学习。对某个统治者A所属的文化（A文化），在A文化的所有统治者的所有宗主国中符合条件B的、且军力最强的统治者所属的文化（简称最强文化B或主导文化）将作为A文化的引领文化
#每个结算周期，A文化将获得文化学习进度，文化学习进度计算公式：0.1 × 所有符合条件的B的数目 + 1 （理解为：A会向所有符合条件的统治者B的文化进行学习，但最强文化B会额外带来更多影响）
#若A为玩家，则前述文化学习进度计算公式修改为：0.05 × 所有符合条件的B的数目 + 0.5
#当文化学习进度达到100时，A文化随机从”那一时刻的“最强文化B已掌握的革新中随机获取一项革新，然后A文化的文化学习进度扣除100


SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_07_trigger = {
	is_independent_ruler = yes
	NOT = { has_culture_group = culture_group:chinese_group }
	highest_held_title_tier >= tier_duchy
}

SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_07_trigger = {
	has_culture_group = culture_group:chinese_group
	NOT = { has_culture = scope:$RULER$.culture }
	highest_held_title_tier >= tier_kingdom
	TributeSystem_can_be_suzerain_of_trigger = { TRIBUTARY = $RULER$ }
}

SpecialRelevantFactorImpactOnRuler_any_relevant_factor_is_type_A_07_trigger = {
	any_relation = {
		type = WLTDJ_suzerain
		SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_07_trigger = { RULER = $RULER$ }
	}
}





#8.大国来朝（$SpecialRelevantFactorImpactOnRuler_type_A_08_A_character_modifier_for_tips$）
#统治者A：律令制，独立统治者，公爵或以上
#统治者B：有资格作为A的朝贡国，现为A的朝贡国
#A获得的修正：每有一个符合条件的AB组合获得正面修正：“$SpecialRelevantFactorImpactOnRuler_type_A_08_A_character_modifier_for_tips$”。若A是玩家，头衔等级与A相差越小的B给A带来增益越多，每一档的修正最大叠加数量为10，对AI则无视头衔级别差异，增益均一致，且无前述数量限制


SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_08_trigger = {
	is_independent_ruler = yes
	has_government = imperial_government
	highest_held_title_tier >= tier_duchy
}

SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger = {
	TributeSystem_can_be_tributary_of_trigger = { SUZERAIN = $RULER$ }
}

SpecialRelevantFactorImpactOnRuler_any_relevant_factor_is_type_A_08_trigger = {
	OR = {
		any_ally = {
			SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger = { RULER = $RULER$ }
		}
		any_relation = {
			type = WLTDJ_tributary
			TributeSystem_can_be_tributary_of_trigger = { SUZERAIN = $RULER$ }
			SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_08_trigger = { RULER = $RULER$ }
		}	
	}
}


#9.【】（$SpecialRelevantFactorImpactOnRuler_type_A_09_A_character_modifier_for_tips$）
#统治者A：律令制，独立统治者，王国级或以上,玩家角色
#角色B：为A的廷臣
#A获得的修正：每有一个符合条件的AB组合获得正面修正：“$SpecialRelevantFactorImpactOnRuler_type_A_09_A_character_modifier_for_tips$”。若A是玩家，头衔等级与A相差越小的B给A带来增益越多，每一档的修正最大叠加数量为10，对AI则无视头衔级别差异，增益均一致，且无前述数量限制


SpecialRelevantFactorImpactOnRuler_trigger_ruler_is_type_A_09_trigger = {
	is_ai = no
	is_independent_ruler = yes
	has_government = imperial_government
	highest_held_title_tier >= tier_kingdom
}

SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_09_trigger = {
	is_courtier_of = scope:$RULER$
}

SpecialRelevantFactorImpactOnRuler_any_relevant_factor_is_type_A_09_trigger = {
	any_courtier = {
		SpecialRelevantFactorImpactOnRuler_relevant_factor_is_type_A_09_trigger = { RULER = $RULER$ }
	}
}



